<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Türkiye'deki araba modelleri, fiyatları ve teknik özelliklerini keşfedin">
    <meta name="keywords" content="araba, otomobil, fiyat, model, marka, türkiye">
    <meta name="author" content="alihaydarkir">
    <title>Araba Bilgileri - Türkiye'nin En Kapsamlı Otomobil Veritabanı</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="/css/styles.css">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Araba Bilgileri">
    <meta property="og:description" content="Türkiye'deki araba modelleri ve fiyatları">
    <meta property="og:type" content="website">
</head>
<body>
    <header>
        <nav>
            <a href="/" title="Ana Sayfa">🏠 Ana Sayfa</a>
            <a href="#search" title="Arama Yap">🔍 Arama</a>
            <a href="#contact" title="İletişim">📧 İletişim</a>
            <a href="https://izu.edu.tr/" target="_blank" rel="noopener" title="İZÜ Web Sayfası">🎓 İZÜ</a>
        </nav>
    </header>

    <main>
        <!-- Arama Bölümü -->
        <section id="search" class="fade-in">
            <h1>🚗 Araba Bilgileri Veritabanı</h1>
            
            <!-- İstatistikler -->
            <% if (typeof toplamSonuc !== 'undefined' && typeof toplamAraba !== 'undefined') { %>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number"><%= toplamSonuc %></div>
                    <div class="stat-label">Gösterilen Sonuç</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number"><%= toplamAraba %></div>
                    <div class="stat-label">Toplam Araba</div>
                </div>
                <% if (anahtarKelime) { %>
                <div class="stat-item">
                    <div class="stat-number">🔍</div>
                    <div class="stat-label">"<%= anahtarKelime %>" araması</div>
                </div>
                <% } %>
            </div>
            <% } %>

            <!-- Arama Formu -->
            <form action="/filtrele" method="POST" class="search-form">
                <input 
                    type="text" 
                    name="anahtarKelime" 
                    placeholder="Marka, model, yakıt türü veya vites ile ara..." 
                    value="<%= anahtarKelime || '' %>"
                    aria-label="Arama kutusu"
                    autocomplete="off"
                >
                <button type="submit" aria-label="Arama yap">
                    🔍 Ara
                </button>
                <% if (anahtarKelime) { %>
                <a href="/" class="clear-search" title="Aramayı temizle">❌ Temizle</a>
                <% } %>
            </form>

            <!-- Mesaj Bildirimleri -->
            <% if (mesaj) { %>
                <div class="message <%= typeof basari !== 'undefined' && basari ? 'success' : (typeof hata !== 'undefined' && hata ? 'error' : 'info') %>">
                    <%= mesaj %>
                </div>
            <% } %>

            <!-- Sonuç Tablosu -->
            <% if (arabalar && arabalar.length > 0) { %>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>📱 ID</th>
                            <th>🏭 Marka</th>
                            <th>🚙 Model</th>
                            <th>⚙️ Donanım</th>
                            <th>🔧 Motor (cc)</th>
                            <th>⛽ Yakıt</th>
                            <th>🔄 Vites</th>
                            <th>💰 Fiyat</th>
                            <th>🌐 Web Sitesi</th>
                            <th>📄 Detay</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% arabalar.forEach(araba => { %>
                        <tr>
                            <td><span class="badge">#<%= araba.id %></span></td>
                            <td><strong><%= araba.marka %></strong></td>
                            <td><%= araba.model %></td>
                            <td><%= araba.donanim %></td>
                            <td><%= araba.motor %> cc</td>
                            <td>
                                <span class="fuel-type <%= araba.yakit.toLowerCase() %>">
                                    <%= araba.yakit === 'Benzin' ? '⛽' : '🛢️' %>
                                    <%= araba.yakit %>
                                </span>
                            </td>
                            <td>
                                <span class="transmission-type">
                                    <%= araba.vites === 'Otomatik' ? '🤖' : '🎮' %>
                                    <%= araba.vites %>
                                </span>
                            </td>
                            <td class="price">
                                ₺<%= parseInt(araba.fiyat).toLocaleString('tr-TR') %>
                            </td>
                            <td>
                                <% if (araba.websitesi) { %>
                                <a href="<%= araba.websitesi %>" 
                                   target="_blank" 
                                   rel="noopener" 
                                   title="<%= araba.marka %> web sitesi">
                                    🔗 Ziyaret Et
                                </a>
                                <% } else { %>
                                <span class="text-muted">-</span>
                                <% } %>
                            </td>
                            <td>
                                <a href="/araba/<%= araba.id %>" 
                                   title="<%= araba.marka %> <%= araba.model %> detayları">
                                    📋 Detay
                                </a>
                            </td>
                        </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
            <% } else if (anahtarKelime) { %>
            <!-- Boş Sonuç Durumu -->
            <div class="empty-state">
                <h3>🔍 Arama Sonucu Bulunamadı</h3>
                <p>"<strong><%= anahtarKelime %></strong>" araması için hiçbir sonuç bulunamadı.</p>
                <p>
                    <strong>Öneriler:</strong><br>
                    • Farklı anahtar kelimeler deneyin<br>
                    • Sadece marka adı yazın (örn: BMW, Mercedes)<br>
                    • Yakıt türü yazın (örn: Benzin, Dizel)<br>
                    • Vites türü yazın (örn: Otomatik, Manuel)
                </p>
                <a href="/" class="btn-primary">Tüm Arabaları Görüntüle</a>
            </div>
            <% } %>
        </section>

        <!-- İletişim Formu -->
        <section id="contact" class="fade-in">
            <h2>📧 İletişim Formu</h2>
            <p>Sorularınız, önerileriniz veya yeni araba modellerinin eklenmesi için bizimle iletişime geçin.</p>
            
            <form action="/iletisim" method="POST" class="contact-form">
                <div class="form-group">
                    <label for="adSoyad">👤 Ad Soyad *</label>
                    <input 
                        type="text" 
                        id="adSoyad" 
                        name="adSoyad" 
                        required 
                        minlength="2"
                        maxlength="50"
                        placeholder="Adınız ve soyadınız"
                        aria-describedby="adSoyad-help"
                    >
                    <small id="adSoyad-help" class="form-help">En az 2, en fazla 50 karakter</small>
                </div>

                <div class="form-group">
                    <label for="email">📧 E-posta *</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        required
                        placeholder="ornek@email.com"
                        aria-describedby="email-help"
                    >
                    <small id="email-help" class="form-help">Geçerli bir e-posta adresi girin</small>
                </div>

                <div class="form-group">
                    <label for="telefon">📞 Telefon</label>
                    <input 
                        type="tel" 
                        id="telefon" 
                        name="telefon"
                        placeholder="0(5xx) xxx xx xx"
                        pattern="[0-9\s\(\)\-\+]+"
                        aria-describedby="telefon-help"
                    >
                    <small id="telefon-help" class="form-help">Opsiyonel - Telefon numaranız</small>
                </div>

                <div class="form-group">
                    <label for="mesaj">💬 Mesaj *</label>
                    <textarea 
                        id="mesaj" 
                        name="mesaj" 
                        required
                        minlength="10"
                        maxlength="500"
                        placeholder="Mesajınızı buraya yazın..."
                        aria-describedby="mesaj-help"
                    ></textarea>
                    <small id="mesaj-help" class="form-help">En az 10, en fazla 500 karakter</small>
                </div>

                <button type="submit" class="btn-primary">
                    📤 Mesaj Gönder
                </button>
            </form>
        </section>

        <!-- Hakkında Bölümü -->
        <section class="about fade-in">
            <h2>ℹ️ Hakkında</h2>
            <div class="about-content">
                <p>
                    <strong>Araba Bilgileri</strong>, Türkiye'deki otomobil modellerinin teknik özelliklerini, 
                    fiyatlarını ve marka bilgilerini bir araya getiren kapsamlı bir veritabanıdır.
                </p>
                <div class="features">
                    <div class="feature-item">
                        <h4>🔍 Gelişmiş Arama</h4>
                        <p>Marka, model, yakıt türü ve vites tipine göre filtreleme</p>
                    </div>
                    <div class="feature-item">
                        <h4>📱 Responsive Tasarım</h4>
                        <p>Tüm cihazlarda mükemmel görüntüleme deneyimi</p>
                    </div>
                    <div class="feature-item">
                        <h4>🚀 Hızlı Erişim</h4>
                        <p>Optimize edilmiş performans ve kolay kullanım</p>
                    </div>
                </div>
                <p class="footer-info">
                    <small>
                        © 2024 Araba Bilgileri | Geliştirici: 
                        <a href="https://github.com/alihaydarkir" target="_blank" rel="noopener">
                            alihaydarkir
                        </a> | 
                        <a href="https://izu.edu.tr/" target="_blank" rel="noopener">
                            İstanbul Zaim Üniversitesi
                        </a>
                    </small>
                </p>
            </div>
        </section>
    </main>

    <!-- JavaScript -->
    <script>
        // Form validasyonu
        document.addEventListener('DOMContentLoaded', function() {
            // Arama formu
            const searchForm = document.querySelector('.search-form');
            const searchInput = searchForm.querySelector('input[name="anahtarKelime"]');
            
            // Arama input'una odaklan
            if (searchInput) {
                searchInput.focus();
            }
            
            // İletişim formu validasyonu
            const contactForm = document.querySelector('.contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    const adSoyad = this.querySelector('#adSoyad').value.trim();
                    const email = this.querySelector('#email').value.trim();
                    const mesaj = this.querySelector('#mesaj').value.trim();
                    
                    if (adSoyad.length < 2) {
                        alert('Ad soyad en az 2 karakter olmalıdır.');
                        e.preventDefault();
                        return;
                    }
                    
                    if (mesaj.length < 10) {
                        alert('Mesaj en az 10 karakter olmalıdır.');
                        e.preventDefault();
                        return;
                    }
                });
            }
            
            // Smooth scroll
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // Tablo satırlarına hover efekti
            const tableRows = document.querySelectorAll('tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.01)';
                    this.style.transition = 'transform 0.2s ease';
                });
                
                row.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        });
    </script>
</body>
</html>
